# {{ ansible_managed }}

# See man smartd.conf.

# smartd will re-read the configuration file if it receives a HUP
# signal

# The file gives a list of devices to monitor using smartd, with one
# device per line. Text after a hash (#) is ignored, and you may use
# spaces and tabs for white space. You may use '\' to continue lines.

# L/(02|05|08|11)/27/./19|S/../../0/06
# L/(02|05|08|11)/27/./19 = 1 test long ts les 3 mois le 27 a 19h
# S/../../7/06 = 1 test court le dimanche a 06h
{% if disks | default([]) | count > 0 %}
{% for dev in disks %}
{% if dev != '' %}
{{ dev }} -a {% if smartd_mailto | default(False) %}-m {{ smartd_mailto }}{% endif %} -s (L/(02|05|08|11)/27/./19|S/../../7/06)
{% endif %}
{% endfor %}
{% else %}
# The word DEVICESCAN will cause any remaining lines in this
# configuration file to be ignored: it tells smartd to scan for all
# ATA and SCSI devices.  DEVICESCAN may be followed by any of the
# Directives listed below, which will be applied to all devices that
# are found.  Most users should comment out DEVICESCAN and explicitly
# list the devices that they wish to monitor.
DEVICESCAN -a {% if smartd_mailto | default(False) %}-m {{ smartd_mailto }}{% endif %} -s (L/(02|05|08|11)/27/./19|S/../../7/06)
{% endif %}

