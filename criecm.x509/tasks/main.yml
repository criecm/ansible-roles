---
- name: mkdir pour CA local (FreeBSD)
  file:
    dest: '/usr/local/etc/ssl/certs'
    state: directory
    mode: '0755'
  when: ansible_os_family == "FreeBSD"

- name: Installe CA local
  copy:
    src: '{{ x509_ca_file }}'
    dest: '{{ x509_ca_path }}'
    owner: root
    group: '0'
    mode: '0644'
  when: x509_ca_file != ""

# tasks file for criecm.x509
- name: os tasks
  include_tasks: '{{ item }}'
  with_first_found:
    - files:
        - '{{ ansible_os_family }}.yml'
      skip: True
  when: x509_ca_file != ""
